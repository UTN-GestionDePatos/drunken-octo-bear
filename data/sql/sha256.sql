/*
	Configuración del Motor.
*/
EXEC sp_configure 'show advanced options', 1
GO
RECONFIGURE
EXEC sp_configure 'clr enabled', 1
GO
EXEC sp_configure 'xp_cmdshell', 1
GO
RECONFIGURE
GO

/*
	Creación de funciones auxiliares.
*/
/*DECLARE @path nvarchar(500)

SET @path = N'$(varPath)' + 'sql\Crypt.dll'


CREATE ASSEMBLY dbo.Crypt FROM @path
GO
*/
USE [GD2C2012]
GO

CREATE ASSEMBLY [Crypt]
AUTHORIZATION [dbo]
FROM 0x4D5A90000300000004000000FFFF0000B800000000000000400000000000000000000000000000000000000000000000000000000000000000000000800000000E1FBA0E00B409CD21B8014CCD21546869732070726F6772616D2063616E6E6F742062652072756E20696E20444F53206D6F64652E0D0D0A2400000000000000504500004C0103004DEA86500000000000000000E00002210B0108000006000000060000000000004E240000002000000040000000004000002000000002000004000000000000000400000000000000008000000002000000000000030040850000100000100000000010000010000000000000100000000000000000000000002400004B000000004000009802000000000000000000000000000000000000006000000C00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000080000000000000000000000082000004800000000000000000000002E7465787400000054040000002000000006000000020000000000000000000000000000200000602E7273726300000098020000004000000004000000080000000000000000000000000000400000402E72656C6F6300000C0000000060000000020000000C0000000000000000000000000000400000420000000000000000000000000000000030240000000000004800000002000500842000007C0300000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000133002001E0000000100001100730400000A0A060F00280500000A6F0600000A730700000A0B2B00072A1E02280800000A2A000042534A4201000100000000000C00000076322E302E35303732370000000005006C0000003C010000237E0000A80100005C01000023537472696E6773000000000403000008000000235553000C0300001000000023475549440000001C0300006000000023426C6F620000000000000002000001471502000900000000FA0133001600000100000008000000020000000200000001000000080000000300000001000000010000000200000000000A0001000000000006002A0023000A0052003D000A005B003D000600970077000600B70077000A00F000D50006002201050106004001050100000000010000000000010001000100100014000000050001000100502000000000960065000A0001007A200000000086186C001100020000000100720021006C00150029006C00110031006C00110039006C001100190030011F0041004E01240011006C002B0009006C00110020001B001A002E000B0038002E001300410031000480000000000000000000000000000000001400000002000000000000000000000001001A000000000002000000000000000000000001003100000000000000003C4D6F64756C653E0043727970742E646C6C004372797074006D73636F726C69620053797374656D004F626A6563740053797374656D2E446174610053797374656D2E446174612E53716C54797065730053716C42797465730053716C537472696E6700536861323536002E63746F7200746578740053797374656D2E52756E74696D652E436F6D70696C6572536572766963657300436F6D70696C6174696F6E52656C61786174696F6E734174747269627574650052756E74696D65436F6D7061746962696C697479417474726962757465004D6963726F736F66742E53716C5365727665722E5365727665720053716C46756E6374696F6E4174747269627574650053797374656D2E53656375726974792E43727970746F677261706879005348413235364D616E6167656400476574556E69636F646542797465730048617368416C676F726974686D00436F6D7075746548617368000000000320000000000091BDAFF685156942AFC88746F9CBE80A0008B77A5C561934E0890600011209110D03200001042001010804010000000420001D050620011D051D05052001011D05060702122112090801000800000000001E01000100540216577261704E6F6E457863657074696F6E5468726F7773012824000000000000000000003E240000002000000000000000000000000000000000000000000000302400000000000000005F436F72446C6C4D61696E006D73636F7265652E646C6C0000000000FF25002040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001001000000018000080000000000000000000000000000001000100000030000080000000000000000000000000000001000000000048000000584000003C02000000000000000000003C0234000000560053005F00560045005200530049004F004E005F0049004E0046004F0000000000BD04EFFE00000100000000000000000000000000000000003F000000000000000400000002000000000000000000000000000000440000000100560061007200460069006C00650049006E0066006F00000000002400040000005400720061006E0073006C006100740069006F006E00000000000000B0049C010000010053007400720069006E006700460069006C00650049006E0066006F0000007801000001003000300030003000300034006200300000002C0002000100460069006C0065004400650073006300720069007000740069006F006E000000000020000000300008000100460069006C006500560065007200730069006F006E000000000030002E0030002E0030002E003000000034000A00010049006E007400650072006E0061006C004E0061006D0065000000430072007900700074002E0064006C006C0000002800020001004C006500670061006C0043006F0070007900720069006700680074000000200000003C000A0001004F0072006900670069006E0061006C00460069006C0065006E0061006D0065000000430072007900700074002E0064006C006C000000340008000100500072006F006400750063007400560065007200730069006F006E00000030002E0030002E0030002E003000000038000800010041007300730065006D0062006C0079002000560065007200730069006F006E00000030002E0030002E0030002E003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000C000000503400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
WITH PERMISSION_SET = SAFE
GO

CREATE FUNCTION SHA256(@text nchar(50))
RETURNS VARBINARY(256) AS 
EXTERNAL NAME Crypt.Crypt.Sha256
GO